image: node:14-slim

stages:
  - build

build:extension:
  stage: build
  script:
    - npm install -g js-yaml vsce
    - js-yaml syntaxes/opsi-script.tmLanguage.yaml > syntaxes/opsi-script.tmLanguage.json
    - vsce package
  artifacts:
    name: 'vscode-extension-opsi-script'
    paths:
      - '*.vsix'
    expire_in: 2 days
